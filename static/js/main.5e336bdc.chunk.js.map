{"version":3,"sources":["images/arrowLeft.svg","images/arrowRight.svg","images/errorIcon.svg","components/UserInfo.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","components/ImagePopup.js","components/Spinner.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ViewAuthorPopup.js","utils/utils.js","components/LikeUser.js","components/ViewLikePopup.js","components/ErrorPopup.js","components/InfoTooltip.js","components/AuthComponent.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/Api.js","utils/Auth.js","components/App.js","index.js"],"names":["module","exports","UserInfo","email","onLogout","className","onClick","to","Header","isLoggedIn","userEmail","isUserInfoOpened","setIsUserInfoOpened","href","aria-label","target","type","e","path","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","onEditCard","onHoverCardCaption","onHoverLikeCard","onOutHover","currentUser","useContext","imageRef","useRef","captionRef","likeRef","isOwn","owner","_id","isLiked","likes","some","i","needUpdateCard","useState","handleHideInfo","src","link","alt","name","ref","onLoad","current","naturalWidth","style","objectFit","onMouseEnter","element","left","offsetParent","offsetLeft","top","offsetTop","right","document","documentElement","clientWidth","bottom","clientHeight","width","offsetWidth","height","offsetHeight","clientY","onMouseOut","length","Main","onEditAvatar","onEditProfile","onAddCard","cards","avatar","about","map","item","key","Footer","Popup","isOpen","onClose","children","handleCloseByEsc","useCallback","useEffect","addEventListener","removeEventListener","onMouseDown","currentTarget","ImagePopup","currentCard","setCurrentCard","handlePreviousCard","currentIndex","indexOf","handleNextCard","handlePressButtonKeyboard","previousButtonIcon","nextButtonIcon","Spinner","PopupWithForm","onSubmit","title","submitDescription","isSubmitDisabled","action","noValidate","disabled","EditProfilePopup","onUpdateUser","onCheckValidation","setName","setAbout","isNameValid","setIsNameValid","isAboutValid","setIsAboutValid","errorMessageName","setErrorMessageName","errorMessageAbout","setErrorMessageAbout","isLoading","setIsLoading","setIsSubmitDisabled","preventDefault","finally","value","id","placeholder","onChange","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","setAvatar","isAvatarValid","setIsAvatarValid","errorMessageAvatar","setErrorMessageAvatar","AddPlacePopup","onSaveCard","setLink","isLinkValid","setIsLinkValid","errorMessageLink","setErrorMessageLink","ConfirmDeletePopup","onDeleteCard","onSetSubmitDisabled","ViewAuthorPopup","popupOutputArea","arrText","LikeUser","user","ViewLikePopup","num","needUpdateViewLike","needUpdateView","approximateHeight","setPosition","ErrorPopup","errorMessage","handleCloseByOverlay","classList","contains","errorIcon","status","message","url","InfoTooltip","fail","AuthComponent","description","setEmail","password","setPassword","isEmailValid","setIsEmailValid","errorMessageEmail","setErrorMessageEmail","isPasswordValid","setIsPasswordValid","errorMessagePassword","setErrorMessagePassword","htmlFor","Login","props","Register","ProtectedRoute","Component","component","apiServer","property","this","_url","_headers","headers","result","ok","json","Promise","reject","statusText","fetch","then","_processingResult","linkAvatar","method","body","JSON","stringify","data","idCard","metodHtml","authorization","auth","response","_checkResponse","token","App","setCards","setCurrentUser","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","isViewAuthorPopupOpen","setIsViewAuthorPopupOpen","isViewLikePopupOpen","setIsViewLikePopupOpen","setNeedUpdateViewLike","setPopupOutputArea","isErrorPopupOpen","setIsErrorPopupOpen","setErrorMessage","setIsLoggedIn","setUserEmail","isInfoTooltipOpen","setIsInfoTooltipOpen","tooltipMessage","setToolTipMessage","history","useHistory","showError","err","getUserProperties","userData","catch","getAllCards","cardsData","handleTokenCheck","push","handleUpdateUser","a","updateUserProperties","updateData","handleCloseAllPopups","handleUpdateAvatar","updateUserAvatar","toggleLikeCard","setUpdateCard","filter","handleCardLike","setLikeCard","handleAddCard","addCard","newCard","handleSaveCard","deleteCard","c","handleSaveCardSubmit","handleDeleteCardSubmit","checkInputValidation","input","setValid","validity","valid","validationMessage","handleError","error","console","log","handleResponseAuth","localStorage","setItem","checkToken","getItem","Provider","removeItem","exact","area","authorize","register","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5e336bdc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/arrowLeft.247212d6.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrowRight.6f3961a7.svg\";","module.exports = __webpack_public_path__ + \"static/media/errorIcon.597bd0a7.svg\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst UserInfo = ({email, onLogout}) => {\n  return (\n    <div className={'header__info'}>\n    <p className=\"header__email\">{email}</p>\n    <Link className=\"header__link\" onClick={onLogout} to=\"/sign-in\">\n      Выйти\n    </Link>\n  </div>\n);\n};\n\nexport default UserInfo;","import React from 'react';\nimport { Route, Switch, Link } from 'react-router-dom';\nimport UserInfo from './UserInfo';\n\nconst Header = ({ isLoggedIn, userEmail, onLogout, isUserInfoOpened, setIsUserInfoOpened }) => {\n\n  const handleMenuClick = (e) => {\n    setIsUserInfoOpened(!isUserInfoOpened);\n  };\n\n  return (\n    <header className=\"header\">\n      {isLoggedIn & isUserInfoOpened ? (<UserInfo email={userEmail} onLogout={onLogout} />) : ''}\n      <div className=\"header__container\">\n        {/*eslint-disable-next-line*/}\n        <a href=\"#\" className=\"header__logo\" aria-label=\"Логотип\" target=\"_blank\" />\n        {isLoggedIn ? (\n          <nav className=\"header__menu\">\n            <p className=\"header__email header__email_hidden\">{userEmail}</p>\n            <button type=\"button\" className=\"header__link header__link_hidden\" onClick={onLogout}>Выйти</button>\n            <button type=\"button\" className={`header__menu-button ${isUserInfoOpened ? 'header__menu-button_opened' : ''}`} onClick={handleMenuClick} />\n          </nav>\n        ) : (\n          <nav className=\"header__menu\">\n          <Switch>\n            <Route path=\"/sign-up\">\n              <Link className=\"header__link\" to=\"/sign-in\">\n                Войти\n              </Link>\n            </Route>\n            <Route path=\"/sign-in\">\n              <Link className=\"header__link\" to=\"/sign-up\">\n                Регистрация\n              </Link>\n            </Route>\n          </Switch>\n          </nav>\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React, { useContext, useRef, useState } from 'react';\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete, onEditCard, onHoverCardCaption, onHoverLikeCard, onOutHover }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const imageRef = useRef();\n  const captionRef = useRef();\n  const likeRef = useRef();\n  const isOwn = card.owner._id === currentUser._id;\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const needUpdateCard = useState(false);\n\n  const handleClick = () => {\n    onCardClick(card);\n  }\n\n  const handleLikeClick = () => {\n    needUpdateCard[1](false); //обнулим флаг обновления\n    onCardLike(card, needUpdateCard[1]);\n  }\n\n  const handleDeleteClick = () => {\n    onCardDelete(card);\n  }\n\n  const handleEditClick = () => {\n    onEditCard(card);\n  }\n\n  const handleSetupImageProperties = () => {\n    if (imageRef.current.naturalWidth < 150) {\n      imageRef.current.style.objectFit = 'none';\n    }\n  }\n\n  const handleShowAuthorInfo = (e) => {\n    const element = captionRef.current;\n    onHoverCardCaption(card,\n      {\n        left: element.offsetParent.offsetLeft + element.offsetLeft,\n        top: element.offsetParent.offsetTop + element.offsetTop,\n        right: document.documentElement.clientWidth - element.offsetParent.offsetLeft - element.offsetLeft,\n        bottom: document.documentElement.clientHeight - element.offsetParent.offsetTop - element.offsetTop,\n        width: element.offsetWidth,\n        height: element.offsetHeight,\n        clientY: e.clientY,\n      });\n  }\n\n  const handleShowLikeInfo = (e) => {\n    const element = likeRef.current;\n    onHoverLikeCard(card,\n      {\n        left: element.offsetParent.offsetLeft + element.offsetLeft,\n        top: element.offsetParent.offsetTop + element.offsetTop,\n        right: document.documentElement.clientWidth - element.offsetParent.offsetLeft - element.offsetLeft,\n        bottom: document.documentElement.clientHeight - element.offsetParent.offsetTop - element.offsetTop,\n        width: element.offsetWidth,\n        height: element.offsetHeight,\n        clientY: e.clientY\n      });\n  }\n\n  const handleHideInfo = () => {\n    onOutHover();\n  }\n\n  return (\n    <article className=\"card\">\n      <img src={card.link} alt={`Фотография ${card.name}`} className=\"card__image\" ref={imageRef}\n        onClick={handleClick} onLoad={handleSetupImageProperties} />\n      <div className=\"card__button-container\">\n        <button\n          className={`card__delete-button ${isOwn ? 'card__delete-button_visible' : ''}`}\n          type=\"button\" aria-label=\"Удалить карточку\" onClick={handleDeleteClick} />\n        <button\n          className={`card__edit-button ${isOwn ? 'card__edit-button_visible' : ''}`}\n          type=\"button\" aria-label=\"Редактировать карточку\" onClick={handleEditClick} />\n      </div>\n      <div className=\"card__description\">\n        <h2 className=\"card__caption\" ref={captionRef} onMouseEnter={handleShowAuthorInfo}\n          onMouseOut={handleHideInfo}>{card.name}</h2>\n        <div className=\"card__like-container\">\n          <button className={`card__like-button ${isLiked ? 'card__like-button_active' : ''}`} type=\"button\"\n            aria-label=\"Лайкнуть\" onClick={handleLikeClick}\n            ref={likeRef} onMouseEnter={handleShowLikeInfo} onMouseOut={handleHideInfo} />\n          <p className=\"card__like-count\">{card.likes.length}</p>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default Card;\n","import React, {useContext} from 'react';\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nconst Main = ({\n                onEditAvatar,\n                onEditProfile,\n                onAddCard,\n                cards,\n                onCardClick,\n                onCardLike,\n                onCardDelete,\n                onEditCard,\n                onHoverCardCaption,\n                onHoverLikeCard,\n                onOutHover\n              }) => {\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватарка\"/>\n          <button className=\"profile__edit-avatar-button\" type=\"button\" aria-label=\"Редактировать аватарку\"\n                  onClick={onEditAvatar}/>\n        </div>\n        <h1 className=\"profile__name\">{currentUser.name}</h1>\n        <button className=\"profile__edit-button\" type=\"button\" aria-label=\"Редактировать профиль\"\n                onClick={onEditProfile}/>\n        <p className=\"profile__specialization\">{currentUser.about}</p>\n        <button className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить фото\" onClick={onAddCard}/>\n      </section>\n      <section className=\"cards\">\n        {cards.map(item => {\n          return (\n            <Card key={item._id} card={item} onCardClick={onCardClick} onCardLike={onCardLike}\n                  onCardDelete={onCardDelete} onEditCard={onEditCard} onHoverCardCaption={onHoverCardCaption} onHoverLikeCard={onHoverLikeCard}\n                  onOutHover={onOutHover}/>\n          )\n        })\n        }\n      </section>\n    </main>\n  );\n};\n\nexport default Main;\n","import React from 'react';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Место Россия</p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, {useEffect, useCallback} from 'react';\n\nconst Popup = ({isOpen, onClose, name, children}) => {\n\n  function handleCloseByOverlay(e) {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  }\n\n  const handleCloseByEsc = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }, [onClose]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handleCloseByEsc);\n      return () => {\n        document.removeEventListener('keydown', handleCloseByEsc);\n      };\n    }\n  }, [isOpen, handleCloseByEsc]);\n\n  return (\n    <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`} onMouseDown={handleCloseByOverlay}>\n      {children}\n    </div>\n  );\n};\n\nexport default Popup;\n\n","import Popup from \"./Popup\";\nimport previousButtonIcon from \"../images/arrowLeft.svg\";\nimport nextButtonIcon from \"../images/arrowRight.svg\";\nimport React, {useCallback, useEffect} from \"react\";\n\nconst ImagePopup = ({isOpen, onClose, currentCard, setCurrentCard, cards}) => {\n\n  const handlePreviousCard = useCallback(() => {\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex - 1 < 0) {\n      setCurrentCard(cards[cards.length - 1]);\n    } else {\n      setCurrentCard(cards[currentIndex - 1]);\n    }\n  },[cards, currentCard, setCurrentCard]);\n\n  const handleNextCard = useCallback(() => {\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex + 1 > cards.length - 1) {\n      setCurrentCard(cards[0]);\n    } else {\n      setCurrentCard(cards[currentIndex + 1]);\n    }\n  },[cards, currentCard, setCurrentCard]);\n\n  const handlePressButtonKeyboard = useCallback(\n    (e) => {\n      if (e.key === 'ArrowRight') {\n        handleNextCard();\n      } else if (e.key === 'ArrowLeft') {\n        handlePreviousCard();\n      }\n    }, [handleNextCard, handlePreviousCard]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handlePressButtonKeyboard);\n      return () => {\n        document.removeEventListener('keydown', handlePressButtonKeyboard);\n      };\n    }\n  }, [isOpen, handlePressButtonKeyboard]);\n\n  return (\n    <Popup isOpen={isOpen} name=\"view-card\" onClose={onClose}>\n      <button className=\"popup__previous-button\" type=\"button\" aria-label=\"Предыдущая карточка\" onClick={handlePreviousCard}>\n        <img src={previousButtonIcon} alt=\"Предыдущая карточка\" className=\"popup__previous-image\"/>\n      </button>\n      <div className=\"popup__photo-container\">\n        <img src={isOpen ? currentCard.link : ''} alt={`Фотография ${isOpen ? currentCard.name : ''}`} className=\"popup__image\"/>\n        <p className=\"popup__photo-caption\">{isOpen ? currentCard.name : ''}</p>\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}/>\n      </div>\n      <button className=\"popup__next-button\" type=\"button\" aria-label=\"Следующая карточка\" onClick={handleNextCard}>\n        <img src={nextButtonIcon} alt=\"Следующая карточка\" className=\"popup__next-image\"/>\n      </button>\n    </Popup>\n  );\n};\n\nexport default ImagePopup;\n","import React from 'react';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"popup__loader\">Загрузка</div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\nimport Popup from \"./Popup\";\n\nconst PopupWithForm = ({ isOpen, onClose, onSubmit, name, title, submitDescription, children, isSubmitDisabled }) => {\n  return (\n    <Popup isOpen={isOpen} name={name} onClose={onClose}>\n      <form action=\"#\" className=\"popup__container\" name={`form_${name}`} onSubmit={onSubmit} noValidate>\n        <h2 className=\"popup__header\">{title}</h2>\n        <fieldset className=\"popup__container-info\">\n          {children}\n          <button className={`popup__save-button ${isSubmitDisabled ? 'popup__save-button_disabled' : ''}`}\n            type=\"submit\" aria-label=\"Сохранить изменения\"\n            disabled={isSubmitDisabled}\n          >{submitDescription}</button>\n        </fieldset>\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose} />\n      </form>\n    </Popup>\n  );\n};\n\nexport default PopupWithForm;\n\n","import React, {useContext, useState, useEffect} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nconst EditProfilePopup = ({isOpen, onClose, onUpdateUser, onCheckValidation}) => {\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [isAboutValid, setIsAboutValid] = useState(true);\n  const [errorMessageName, setErrorMessageName] = useState('');\n  const [errorMessageAbout, setErrorMessageAbout] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n    setIsNameValid(true);\n    setIsAboutValid(true);\n    setErrorMessageName('');\n    setErrorMessageAbout('');\n    setIsSubmitDisabled(false);\n  }, [currentUser, isOpen]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!(isNameValid && isAboutValid));\n  }, [isNameValid, isAboutValid]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    onCheckValidation(e.target, setIsNameValid, setErrorMessageName);\n  }\n\n\n  function handleAboutChange(e) {\n    setAbout(e.target.value);\n    onCheckValidation(e.target, setIsAboutValid, setErrorMessageAbout);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onUpdateUser({name, about})\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Редактировать профиль\" name=\"profile\" isOpen={isOpen}\n                   onClose={onClose} submitDescription={isLoading ? 'Сохранение...' : 'Сохранить'}\n                   onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}>\n      <input value={name} type=\"text\" className=\"popup__edit-field\" id=\"author-name\" placeholder=\"Автор\" name=\"name\"\n             onChange={handleNameChange}\n             minLength=\"2\"\n             maxLength=\"40\" required/>\n      <span id=\"author-name-error\"\n            className={`popup__input-error ${!isNameValid ? 'popup__input-error_visible' : ''}`}>{errorMessageName}</span>\n      <input value={about} type=\"text\" className=\"popup__edit-field\" id=\"author-specialization\" placeholder=\"О себе\"\n             onChange={handleAboutChange}\n             name=\"about\"\n             minLength=\"2\" maxLength=\"200\" required/>\n      <span id=\"author-specialization-error\"\n            className={`popup__input-error ${!isAboutValid ? 'popup__input-error_visible' : ''}`}>{errorMessageAbout}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default EditProfilePopup;\n","import React, { useContext, useEffect, useState } from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar, onCheckValidation }) => {\n  const [avatar, setAvatar] = useState('');\n  const [isAvatarValid, setIsAvatarValid] = useState(true);\n  const [errorMessageAvatar, setErrorMessageAvatar] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setAvatar(currentUser.avatar);\n    setIsAvatarValid(true);\n    setErrorMessageAvatar('');\n    setIsSubmitDisabled(false);\n  }, [currentUser, isOpen]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!isAvatarValid);\n  }, [isAvatarValid]);\n\n  function handleAvatarChange(e) {\n    setAvatar(e.target.value);\n    onCheckValidation(e.target, setIsAvatarValid, setErrorMessageAvatar);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onUpdateAvatar(avatar)\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Обновить аватар\" name=\"avatar\" isOpen={isOpen}\n      onClose={onClose} submitDescription={isLoading ? 'Сохранение...' : 'Сохранить'}\n      onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}>\n      <input type=\"url\" value={avatar} className=\"popup__edit-field\" id=\"avatar-link\" name=\"avatar\"\n        onChange={handleAvatarChange}\n        placeholder=\"Ссылка на картинку\"\n        required />\n      <span id=\"avatar-link-error\"\n        className={`popup__input-error ${!isAvatarValid ? 'popup__input-error_visible' : ''}`}>{errorMessageAvatar}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default EditAvatarPopup;\n","import React, {useEffect, useState} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst AddPlacePopup = ({isOpen, onClose, onSaveCard, onCheckValidation, card}) => {\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n  const [isNameValid, setIsNameValid] = useState(false);\n  const [isLinkValid, setIsLinkValid] = useState(false);\n  const [errorMessageName, setErrorMessageName] = useState('');\n  const [errorMessageLink, setErrorMessageLink] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(true);\n\n  useEffect(() => {\n    if (!card) {\n      setName('');\n      setLink('');\n      setIsNameValid(false);\n      setIsLinkValid(false);\n      setIsSubmitDisabled(true);\n    } else {\n      setName(card.name);\n      setLink(card.link);\n      setIsNameValid(true);\n      setIsLinkValid(true);\n      setIsSubmitDisabled(false);\n    }\n    setErrorMessageName('');\n    setErrorMessageLink('');\n  }, [isOpen, card]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!(isNameValid && isLinkValid));\n  }, [isNameValid, isLinkValid]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    onCheckValidation(e.target, setIsNameValid, setErrorMessageName);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n    onCheckValidation(e.target, setIsLinkValid, setErrorMessageLink);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onSaveCard(card, {name, link})\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title={!card ? 'Новое место' : 'Редактирование места'} name=\"add-card\" isOpen={isOpen}\n                   onClose={onClose}\n                   submitDescription={isLoading ? !card ? 'Добавление...' : 'Сохранение...' : !card ? 'Добавить' : 'Сохранить'}\n                   onSubmit={handleSubmit}\n                   isSubmitDisabled={isSubmitDisabled}>\n      <input value={name} type=\"text\" className=\"popup__edit-field\" id=\"place-name\" placeholder=\"Название\" name=\"name\"\n             minLength=\"2\" maxLength=\"30\" required onChange={handleNameChange}/>\n      <span id=\"place-name-error\"\n            className={`popup__input-error ${!isNameValid ? 'popup__input-error_visible' : ''}`}>{errorMessageName}</span>\n      <input value={link} type=\"url\" className=\"popup__edit-field\" id=\"place-link\" placeholder=\"Ссылка на картинку\"\n             name=\"link\"\n             required onChange={handleLinkChange}/>\n      <span id=\"place-link-error\"\n            className={`popup__input-error ${!isLinkValid ? 'popup__input-error_visible' : ''}`}>{errorMessageLink}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default AddPlacePopup;\n","import React, {useState} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst ConfirmDeletePopup = ({isOpen, onClose, onDeleteCard, onSetSubmitDisabled, card}) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onDeleteCard(card)\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Вы уверены?\" name=\"confirm-delete\" isOpen={isOpen}\n                   onClose={onClose} submitDescription={isLoading ? 'Удаление...' : 'Да'}\n                   onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}/>\n  );\n};\n\nexport default ConfirmDeletePopup;\n","import React from 'react';\n\nconst MIN_HEIGHT_POPUP = 184;\nconst ViewAuthorPopup = ({isOpen, card, popupOutputArea}) => {\n  function setPosition() {\n    if (!isOpen) {\n      return {};\n    }\n    //Костыльный расчет приблизительной высоты так как размер дива измениться после подстановки значений\n    if (popupOutputArea.clientY < MIN_HEIGHT_POPUP) {\n      //места для вывода окошка не хватает - выводим вниз\n      return {left: popupOutputArea.left, top: popupOutputArea.top + popupOutputArea.height};\n    }\n    return {left: popupOutputArea.left, bottom: popupOutputArea.bottom};\n  }\n\n  return (\n    <div className={`popup popup_type_view-author ${isOpen ? 'popup_opened' : ''}`} style={setPosition()}>\n      <img className=\"popup__card-author-avatar\" src={isOpen ? card.owner.avatar : ''} alt=\"Аватарка\"/>\n      <p className=\"popup__card-author-name\">{isOpen ? card.owner.name : ''}</p>\n      <p className=\"popup__card-author-about\">{isOpen ? card.owner.about : ''}</p>\n    </div>\n  );\n};\n\nexport default ViewAuthorPopup;\n\n","const arrText = [\"человек\", \"человека\", \"человек\"];\r\n\r\nexport function formattingUserCount(num) {\r\n  if (num % 10 === 1 && num % 100 !== 11) {\r\n    return arrText[0];\r\n  } else if (\r\n    num % 10 >= 2 &&\r\n    num % 10 <= 4 &&\r\n    (num % 100 < 10 || num % 100 >= 20)\r\n  ) {\r\n    return arrText[1];\r\n  }\r\n  return arrText[2];\r\n}\r\n","import React from 'react';\r\n\r\nconst LikeUser = ({user}) => {\r\n  return (\r\n    <li className=\"popup__like-user\">\r\n      <img className=\"popup__like-user-avatar\" src={user.avatar} alt=\"Аватарка\"/>\r\n      <p className=\"popup__like-user-name\">{user.name}</p>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default LikeUser;\r\n","import React, {useEffect, useState} from 'react';\nimport {formattingUserCount} from \"../utils/utils\";\nimport LikeUser from \"./LikeUser\";\n\nconst MIN_HEIGHT_POPUP = 45;\n\nconst ViewLikePopup = ({isOpen, card, popupOutputArea, needUpdateViewLike}) => {\n  const needUpdateView = useState(false);\n\n  useEffect(() => {\n    needUpdateView[1](needUpdateViewLike);\n  }, [needUpdateViewLike, needUpdateView]);\n\n  function setPosition() {\n    if (!isOpen) {\n      return {};\n    }\n    //На момент вывода окошка не знаем истинную высоту, поэтому делаем костыльный расчет приблизительной высоты\n    const approximateHeight = MIN_HEIGHT_POPUP * card.likes.length;\n    if (popupOutputArea.clientY < approximateHeight) {\n      //места для вывода окошка не хватает - выводим вниз\n      return {right: popupOutputArea.right, top: popupOutputArea.top + popupOutputArea.height};\n    }\n    return {right: popupOutputArea.right, bottom: popupOutputArea.bottom};\n  }\n\n  return (\n    <div className={`popup popup_type_view-likes ${isOpen ? 'popup_opened' : ''}`} style={setPosition()}>\n      <h2\n        className=\"popup__header popup__header_size_small\">\n        {`Оценили:  ${isOpen ? card.likes.length : 0} ${isOpen ? formattingUserCount(card.likes.length) : 'человек'}:`}\n      </h2>\n      <ul className=\"popup__like-users\">\n        {isOpen ? card.likes.map(user => {\n          return (<LikeUser key={user._id} user={user}/>)\n        }) : ''}\n      </ul>\n    </div>\n  );\n};\n\nexport default ViewLikePopup;\n\n","import React, {useCallback, useEffect} from 'react';\r\nimport errorIcon from \"../images/errorIcon.svg\";\r\n\r\nconst ErrorPopup = ({isOpen, errorMessage, onClose}) => {\r\n\r\n  const handleCloseByOverlay = useCallback(\r\n    (e) => {\r\n      if (!e.target.classList.contains('error-identification')) {\r\n        onClose();\r\n      }\r\n    }, [onClose]);\r\n\r\n  const handleCloseByEsc = useCallback(\r\n    (e) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }, [onClose]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleCloseByEsc);\r\n      document.addEventListener('mousedown', handleCloseByOverlay);\r\n      return () => {\r\n        document.removeEventListener('keydown', handleCloseByEsc);\r\n        document.removeEventListener('mousedown', handleCloseByOverlay);\r\n      };\r\n    }\r\n  }, [isOpen, handleCloseByEsc, handleCloseByOverlay]);\r\n\r\n  return (\r\n    <div className={`popup popup_type_error ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__error-container error-identification\" onMouseDown={handleCloseByOverlay}>\r\n        <div className=\"popup__error error-identification\">\r\n          <img className=\"popup__error-icon error-identification\" src={errorIcon} alt=\"Картинка ошибки\"/>\r\n          <h2 className=\"popup__error-header error-identification\">Ошибка обращения к серверу:</h2>\r\n        </div>\r\n        <p\r\n          className=\"popup__error-caption error-identification\">\r\n          {`${errorMessage.status} ${errorMessage.message} url=${errorMessage.url}`}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorPopup;\r\n","import React from 'react';\nimport Popup from './Popup';\n\nfunction InfoTooltip({ isOpen, onClose, message }) {\n  return (\n    <Popup name=\"tooltip\" isOpen={isOpen} onClose={onClose}>\n      <div className=\"popup__container\" >\n        <div\n          className={`popup__tooltip-status popup__tooltip-status_type_${message.fail ? 'fail' : 'ok'}`}\n        />\n        <h2 className=\"popup__tooltip-message\">\n          {message.message}\n        </h2>\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose} />\n      </div>\n    </Popup>\n  );\n}\n\nexport default InfoTooltip;\n","import React, { useEffect, useState } from 'react';\n\nfunction AuthComponent({ description, submitDescription, onChange, onSubmit, user, children, onCheckValidation }) {\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isEmailValid, setIsEmailValid] = useState(true);\n  const [errorMessageEmail, setErrorMessageEmail] = useState('');\n  const [isPasswordValid, setIsPasswordValid] = useState(true);\n  const [errorMessagePassword, setErrorMessagePassword] = useState('');\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit({email, password});\n  }\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n    onCheckValidation(e.target, setIsEmailValid, setErrorMessageEmail);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n    onCheckValidation(e.target, setIsPasswordValid, setErrorMessagePassword);\n  }\n\n  useEffect(() => {\n    setIsSubmitDisabled(!(isEmailValid && isPasswordValid));\n  }, [isEmailValid, isPasswordValid]);\n\n  useEffect(() => {\n    setIsEmailValid(false);\n    setIsPasswordValid(false);\n    setIsSubmitDisabled(true);\n  }, []);\n\n  return (\n    <section className=\"auth\">\n      <h2 className=\"auth-form__header\">{description}</h2>\n      <form className=\"auth-form\" onSubmit={handleSubmit} noValidate>\n        <label className=\"auth-form__input-label\" htmlFor=\"email\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"auth-form__input\"\n            placeholder=\"Email\"\n            onChange={handleEmailChange}\n            value={email}\n            required\n          />\n          <span id=\"auth-form__input-error\"\n            className={`auth-form__input-error ${!isEmailValid ? 'auth-form__input-error_visible' : ''}`}>{errorMessageEmail}</span>\n        </label>\n        <label className=\"auth-form__input-label\" htmlFor=\"password\">\n          <input\n            type=\"password\"\n            name=\"password\"\n            className=\"auth-form__input\"\n            placeholder=\"Пароль\"\n            onChange={handlePasswordChange}\n            value={password}\n            required\n          />\n          <span id=\"auth-form__input-error\"\n            className={`auth-form__input-error ${!isPasswordValid ? 'auth-form__input-error_visible' : ''}`}>{errorMessagePassword}</span>\n        </label>\n        <button className={`auth-form__save-button ${isSubmitDisabled ? 'auth-form__save-button_disabled' : ''}`}\n          type=\"submit\" aria-label=\"Сохранить изменения\"\n          disabled={isSubmitDisabled}\n        >{submitDescription}</button>\n      </form>\n      {children}\n    </section>\n  );\n}\n\nexport default AuthComponent;\n","import React from 'react';\nimport AuthComponent from './AuthComponent';\n\nfunction Login(props) {\n  return <AuthComponent description=\"Вход\" submitDescription=\"Войти\" {...props} />;\n}\n\nexport default Login;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthComponent from './AuthComponent';\n\n\nfunction Register(props) {\n  return (\n    <AuthComponent description=\"Регистрация\" submitDescription=\"Зарегистрироваться\" {...props}>\n      <p className=\"auth__caption\">\n        Уже зарегистрированы? <Link to=\"/sign-in\" className=\"auth__link\">Войти</Link>\n      </p>\n    </AuthComponent>\n  );\n}\n\nexport default Register;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ isLoggedIn, component: Component, ...props }) => {\n  return (\n    <Route>\n      {() => {\n        return isLoggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }}\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","class Api {\r\n  _url\r\n  _headers\r\n\r\n  constructor(property) {\r\n    this._url = property.url;\r\n    this._headers = property.headers;\r\n  }\r\n\r\n  _processingResult(result) {\r\n    if (result.ok) {\r\n      return result.json();\r\n    } else {\r\n      return Promise.reject({\r\n        status: result.status,\r\n        message: result.statusText,\r\n        url: result.url\r\n      });\r\n    }\r\n  }\r\n\r\n  getUserProperties() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  updateUserAvatar(linkAvatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: linkAvatar\r\n      })\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  updateUserProperties(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  getAllCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  addCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: data.name, link: data.link})\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  deleteCard(idCard) {\r\n    return fetch(`${this._url}/cards/${idCard}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  setLikeCard(isLiked, id) {\r\n    const metodHtml = isLiked ? 'DELETE' : 'PUT';\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      method: metodHtml,\r\n      headers: this._headers,\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n}\r\n\r\nexport const apiServer = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-27',\r\n  headers: {\r\n    authorization: '7da0d743-b2f7-439b-8a75-4db6d3ee0226',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n\r\n","class Auth {\n  _url\n  _headers\n\n  constructor(property) {\n    this._url = property.url;\n    this._headers = property.headers;\n  }\n\n  _checkResponse(response) {\n    return response.ok ? response.json() : Promise.reject({\n      status: response.status,\n      message: response.statusText,\n      url: response.url\n    });\n  }\n\n  register(email, password) {\n    return fetch(`${this._url}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email })\n    })\n      .then(this._checkResponse);\n  }\n\n  authorize(email, password) {\n    return fetch(`${this._url}/signin`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({ password, email })\n    })\n      .then(this._checkResponse);\n  }\n\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: { ...this._headers, 'Authorization': `Bearer ${token}`, }\n    })\n      .then(this._checkResponse);\n  }\n}\n\nexport const auth = new Auth({\n  url: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});","import React, { useEffect, useState } from \"react\";\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\n\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport Spinner from \"./Spinner\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\nimport ViewAuthorPopup from \"./ViewAuthorPopup\";\nimport ViewLikePopup from \"./ViewLikePopup\";\nimport ErrorPopup from \"./ErrorPopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport { apiServer } from \"../utils/Api\";\nimport { auth } from \"../utils/Auth\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddCardPopupOpen, setIsAddCardPopupOpen] = useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n\n  const [isViewAuthorPopupOpen, setIsViewAuthorPopupOpen] = useState(false);\n  const [isViewLikePopupOpen, setIsViewLikePopupOpen] = useState(false);\n  const [needUpdateViewLike, setNeedUpdateViewLike] = useState(false);\n  const [popupOutputArea, setPopupOutputArea] = useState({\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: 0,\n    height: 0,\n    clientY: 0\n  });\n\n  const [isErrorPopupOpen, setIsErrorPopupOpen] = useState(false);\n  const [errorMessage, setErrorMessage] = useState({ status: null, message: null, url: null });\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [userEmail, setUserEmail] = useState(''); //решение временно т.к. одно поле. После реализации бэка будет перенесено в структуру данных пользователя\n  const [isUserInfoOpened, setIsUserInfoOpened] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [tooltipMessage, setToolTipMessage] = useState({ message: \"\", fail: false });\n\n\n  const history = useHistory();\n\n  const showError = (err) => {\n    setErrorMessage(err);\n    setIsErrorPopupOpen(true);\n  }\n\n  useEffect(() => {\n    apiServer.getUserProperties()\n      .then((userData) => {\n        setCurrentUser(userData);\n      })\n      .catch(err => {\n        showError(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    apiServer.getAllCards()\n      .then((cardsData) => {\n        setCards(cardsData);\n      })\n      .catch(err => {\n        showError(err);\n      });\n  }, []);\n\n  useEffect(() => {\n    handleTokenCheck();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (isLoggedIn === true) {\n      history.push('/');\n    };\n    // eslint-disable-next-line\n  }, [isLoggedIn]);\n\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  const handleUpdateUser = async (data) => {\n    try {\n      const updateData = await apiServer.updateUserProperties(data);\n      setCurrentUser(updateData);\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  const handleUpdateAvatar = async (link) => {\n    try {\n      const updateData = await apiServer.updateUserAvatar(link);\n      setCurrentUser(updateData);\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  const handleAddCardClick = () => {\n    setIsAddCardPopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  const toggleLikeCard = (card, isLiked, setUpdateCard) => {\n    if (isLiked) {\n      card.likes = card.likes.filter((user) => user._id !== currentUser._id);\n    } else {\n      card.likes.push(currentUser);\n    }\n    setUpdateCard(true);\n    setNeedUpdateViewLike(true);\n  }\n\n  const handleCardLike = async (card, setUpdateCard) => {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    //Добавляем/удаляем текущего юзера в массив лайков карточки до получения ответа\n    // от сервера для ускорения реакции интерфейса\n    toggleLikeCard(card, isLiked, setUpdateCard);\n    try {\n      await apiServer.setLikeCard(isLiked, card._id);\n    } catch (err) {\n      showError(err);\n      //обратим действие установочной функции так как сервер вернул ошибку\n      toggleLikeCard(card, !isLiked, setUpdateCard);\n    }\n  }\n\n  const handleCardDelete = (card) => {\n    setSelectedCard(card);\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  const handleEditCard = (card) => {\n    setSelectedCard(card);\n    setIsAddCardPopupOpen(true);\n  }\n\n  const handleAddCard = async (data) => {\n    const newCard = await apiServer.addCard(data);\n    setCards([newCard, ...cards]);\n  }\n\n  //Функция временная, так как у сервера нет методов PATCH или PUT для карточек\n  //TODO: Переделать после реализации backend\n  const handleSaveCard = async (card, data) => {\n    //Сначала удаляем карточку по алгоритму удаления\n    await apiServer.deleteCard(card._id);\n    //Дальше добавляем карточку по алгоритму добавления\n    const newCard = await apiServer.addCard(data);\n    //Обновляем список по алгоритму лайка из рефа\n    setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n  }\n\n  const handleSaveCardSubmit = async (card, data) => {\n    try {\n      if (!card) {\n        await handleAddCard(data);\n      } else {\n        await handleSaveCard(card, data);\n      }\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  const handleDeleteCardSubmit = async (card) => {\n    try {\n      await apiServer.deleteCard(card._id);\n      setCards((cards) => {\n        return cards.filter((c) => c._id !== card._id);\n      });\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  const handleCloseAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddCardPopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsViewAuthorPopupOpen(false);\n    setIsViewLikePopupOpen(false);\n    setNeedUpdateViewLike(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n    setToolTipMessage({ message: \"\", fail: false })\n  }\n\n  const handleCloseErrors = () => {\n    setIsErrorPopupOpen(false);\n  }\n\n  const checkInputValidation = (input, setValid, setErrorMessage) => {\n    if (!input.validity.valid) {\n      setValid(false);\n      setErrorMessage(input.validationMessage);\n    } else {\n      setValid(true);\n    }\n  }\n\n  const handleHoverCardCaption = (card, area) => {\n    setSelectedCard(card);\n    setPopupOutputArea(area);\n    setIsViewAuthorPopupOpen(true);\n  }\n\n  const handleOutHover = () => {\n    handleCloseAllPopups();\n  }\n\n  const handleHoverLikeCard = (card, area) => {\n    setSelectedCard(card);\n    setPopupOutputArea(area);\n    setIsViewLikePopupOpen(true);\n  }\n\n\n  const handleError = (error) => {\n    console.log(error);\n    setToolTipMessage({ message: \"Что-то пошло не так! Попробуйте еще раз.\\n \" + error.message, fail: true });\n    setIsInfoTooltipOpen(true);\n  }\n\n  const handleResponseAuth = (data) => {\n    if (data.token) {\n      localStorage.setItem(\"token\", data.token);\n      auth.checkToken(data.token)\n        .then((userData) => {\n          //вытащим данные имейла\n          setUserEmail(userData.data.email);\n          setIsLoggedIn(true);\n          setToolTipMessage({ message: \"Вы успешно авторизировались!\", fail: false });\n          setIsInfoTooltipOpen(true);\n        })\n    } else {\n      setToolTipMessage({ message: \"Вы успешно зарегистрировались!\", fail: false });\n      setIsInfoTooltipOpen(true);\n      history.push('/sign-in');\n    }\n  };\n\n  const handleLogin = ({ email, password }) => {\n    auth.authorize(email, password)\n      .then(handleResponseAuth)\n      .catch(handleError);\n\n  };\n\n  const handleRegister = ({ email, password }) => {\n    console.log({ email, password });\n    auth.register(email, password)\n      .then(handleResponseAuth)\n      .catch(handleError);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setUserEmail('');\n    setIsUserInfoOpened(false);\n    setIsLoggedIn(false);\n    history.push('/sign-in');\n  };\n\n  const handleTokenCheck = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      // проверяем токен пользователя\n      auth.checkToken(token)\n        .then((userData) => {\n          //вытащим данные имейла\n          setUserEmail(userData.data.email);\n          setIsLoggedIn(true);\n        })\n        .catch(handleError);\n    }\n  };\n\n  //Ибо тернарный оператор выглядит уродливо\n  if (isLoading) {\n    return (<Spinner />);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__container\">\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={handleCloseAllPopups}\n          onUpdateAvatar={handleUpdateAvatar} onCheckValidation={checkInputValidation} />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={handleCloseAllPopups}\n          onUpdateUser={handleUpdateUser} onCheckValidation={checkInputValidation} />\n        <AddPlacePopup isOpen={isAddCardPopupOpen} onClose={handleCloseAllPopups} onSaveCard={handleSaveCardSubmit}\n          onCheckValidation={checkInputValidation} card={selectedCard} />\n        <ConfirmDeletePopup card={selectedCard} isOpen={isConfirmDeletePopupOpen} onClose={handleCloseAllPopups}\n          onDeleteCard={handleDeleteCardSubmit} />\n        <ImagePopup currentCard={selectedCard} setCurrentCard={setSelectedCard} cards={cards} isOpen={isImagePopupOpen}\n          onClose={handleCloseAllPopups} />\n        <ViewAuthorPopup card={selectedCard} popupOutputArea={popupOutputArea} isOpen={isViewAuthorPopupOpen} />\n        <ViewLikePopup card={selectedCard} popupOutputArea={popupOutputArea} isOpen={isViewLikePopupOpen}\n          needUpdateViewLike={needUpdateViewLike} />\n        <ErrorPopup isOpen={isErrorPopupOpen} errorMessage={errorMessage} onClose={handleCloseErrors} />\n        <InfoTooltip isOpen={isInfoTooltipOpen} onClose={handleCloseAllPopups} message={tooltipMessage} />\n        <Header\n          isLoggedIn={isLoggedIn}\n          userEmail={userEmail}\n          isUserInfoOpened={isUserInfoOpened}\n          setIsUserInfoOpened={setIsUserInfoOpened}\n          onLogout={handleLogout}\n        />\n        <Switch>\n          <ProtectedRoute exact path=\"/\"\n            isLoggedIn={isLoggedIn}\n            cards={cards} card={selectedCard} component={Main}\n            onEditAvatar={handleEditAvatarClick} onEditProfile={handleEditProfileClick}\n            onAddCard={handleAddCardClick} onCardClick={handleCardClick} onCardLike={handleCardLike} onCardDelete={handleCardDelete}\n            onEditCard={handleEditCard} onHoverCardCaption={handleHoverCardCaption}\n            onHoverLikeCard={handleHoverLikeCard} onOutHover={handleOutHover}\n          />\n          <Route path=\"/sign-in\">\n            {isLoggedIn ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Login onSubmit={handleLogin} onCheckValidation={checkInputValidation} />\n            )}\n          </Route>\n          <Route path=\"/sign-up\">\n            {isLoggedIn ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <Register onSubmit={handleRegister} onCheckValidation={checkInputValidation} />\n            )}\n          </Route>\n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n        {isLoggedIn && <Footer />}\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter >\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}