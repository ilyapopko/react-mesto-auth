(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{10:function(e,t,a){e.exports=a.p+"static/media/errorIcon.597bd0a7.svg"},14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),i=(a(19),a(13)),s=a(2),u=a.n(s),l=a(3),p=a(1),d=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("a",{href:"#",className:"header__logo","aria-label":"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",target:"_blank"}))},f=r.a.createContext(),m=function(e){var t=e.card,a=e.onCardClick,c=e.onCardLike,o=e.onCardDelete,i=e.onEditCard,s=e.onHoverCardCaption,u=e.onHoverLikeCard,l=e.onOutHover,p=Object(n.useContext)(f),d=Object(n.useRef)(),m=Object(n.useRef)(),b=Object(n.useRef)(),_=t.owner._id===p._id,h=t.likes.some((function(e){return e._id===p._id})),v=Object(n.useState)(!1);function O(){l()}return r.a.createElement("article",{className:"card"},r.a.createElement("img",{src:t.link,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"card__image",ref:d,onClick:function(){a(t)},onLoad:function(){d.current.naturalWidth<150&&(d.current.style.objectFit="none")}}),r.a.createElement("div",{className:"card__button-container"},r.a.createElement("button",{className:"card__delete-button ".concat(_?"card__delete-button_visible":""),type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}}),r.a.createElement("button",{className:"card__edit-button ".concat(_?"card__edit-button_visible":""),type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){i(t)}})),r.a.createElement("div",{className:"card__description"},r.a.createElement("h2",{className:"card__caption",ref:m,onMouseEnter:function(e){var a=m.current;s(t,{left:a.offsetParent.offsetLeft+a.offsetLeft,top:a.offsetParent.offsetTop+a.offsetTop,right:document.documentElement.clientWidth-a.offsetParent.offsetLeft-a.offsetLeft,bottom:document.documentElement.clientHeight-a.offsetParent.offsetTop-a.offsetTop,width:a.offsetWidth,height:a.offsetHeight,clientY:e.clientY})},onMouseOut:O},t.name),r.a.createElement("div",{className:"card__like-container"},r.a.createElement("button",{className:"card__like-button ".concat(h?"card__like-button_active":""),type:"button","aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",onClick:function(){v[1](!1),c(t,v[1])},ref:b,onMouseEnter:function(e){var a=b.current;u(t,{left:a.offsetParent.offsetLeft+a.offsetLeft,top:a.offsetParent.offsetTop+a.offsetTop,right:document.documentElement.clientWidth-a.offsetParent.offsetLeft-a.offsetLeft,bottom:document.documentElement.clientHeight-a.offsetParent.offsetTop-a.offsetTop,width:a.offsetWidth,height:a.offsetHeight,clientY:e.clientY})},onMouseOut:O}),r.a.createElement("p",{className:"card__like-count"},t.likes.length))))},b=function(e){var t=e.onEditAvatar,a=e.onEditProfile,c=e.onAddCard,o=e.cards,i=e.onCardClick,s=e.onCardLike,u=e.onCardDelete,l=e.onEditCard,p=e.onHoverCardCaption,d=e.onHoverLikeCard,b=e.onOutHover,_=Object(n.useContext)(f);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{className:"profile__avatar",src:_.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("button",{className:"profile__edit-avatar-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443",onClick:t})),r.a.createElement("h1",{className:"profile__name"},_.name),r.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:a}),r.a.createElement("p",{className:"profile__specialization"},_.about),r.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",onClick:c})),r.a.createElement("section",{className:"cards"},o.map((function(e){return r.a.createElement(m,{key:e._id,card:e,onCardClick:i,onCardLike:s,onCardDelete:u,onEditCard:l,onHoverCardCaption:p,onHoverLikeCard:d,onOutHover:b})}))))},_=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2021 \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"))},h=function(e){var t=e.isOpen,a=e.onClose,c=e.name,o=e.children;var i=Object(n.useCallback)((function(e){"Escape"===e.key&&a()}),[a]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[t,i]),r.a.createElement("div",{className:"popup popup_type_".concat(c," ").concat(t?"popup_opened":""),onMouseDown:function(e){e.target===e.currentTarget&&a()}},o)},v=a(8),O=a.n(v),E=a(9),j=a.n(E),C=function(e){var t=e.isOpen,a=e.onClose,c=e.currentCard,o=e.setCurrentCard,i=e.cards,s=Object(n.useCallback)((function(){var e=i.indexOf(c);o(e-1<0?i[i.length-1]:i[e-1])}),[i,c,o]),u=Object(n.useCallback)((function(){var e=i.indexOf(c);e+1>i.length-1?o(i[0]):o(i[e+1])}),[i,c,o]),l=Object(n.useCallback)((function(e){"ArrowRight"===e.key?u():"ArrowLeft"===e.key&&s()}),[u,s]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",l),function(){document.removeEventListener("keydown",l)}}),[t,l]),r.a.createElement(h,{isOpen:t,name:"view-card",onClose:a},r.a.createElement("button",{className:"popup__previous-button",type:"button","aria-label":"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:s},r.a.createElement("img",{src:O.a,alt:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__previous-image"})),r.a.createElement("div",{className:"popup__photo-container"},r.a.createElement("img",{src:t?c.link:"",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t?c.name:""),className:"popup__image"}),r.a.createElement("p",{className:"popup__photo-caption"},t?c.name:""),r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})),r.a.createElement("button",{className:"popup__next-button",type:"button","aria-label":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:u},r.a.createElement("img",{src:j.a,alt:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__next-image"})))},k=function(){return r.a.createElement("div",{className:"popup__loader"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")},g=function(e){var t=e.isOpen,a=e.onClose,n=e.onSubmit,c=e.name,o=e.title,i=e.submitDescription,s=e.children,u=e.isSubmitDisabled;return r.a.createElement(h,{isOpen:t,name:c,onClose:a},r.a.createElement("form",{action:"#",className:"popup__container",name:"form_".concat(c),onSubmit:n,noValidate:!0},r.a.createElement("h2",{className:"popup__header"},o),r.a.createElement("fieldset",{className:"popup__container-info"},s,r.a.createElement("button",{className:"popup__save-button ".concat(u?"popup__save-button_disabled":""),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",disabled:u},i)),r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})))},y=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,o=e.onCheckValidation,i=Object(n.useState)(""),s=Object(p.a)(i,2),u=s[0],l=s[1],d=Object(n.useState)(""),m=Object(p.a)(d,2),b=m[0],_=m[1],h=Object(n.useState)(!0),v=Object(p.a)(h,2),O=v[0],E=v[1],j=Object(n.useState)(!0),C=Object(p.a)(j,2),k=C[0],y=C[1],N=Object(n.useState)(""),S=Object(p.a)(N,2),w=S[0],x=S[1],L=Object(n.useState)(""),D=Object(p.a)(L,2),P=D[0],A=D[1],H=Object(n.useState)(!1),T=Object(p.a)(H,2),U=T[0],R=T[1],M=Object(n.useState)(!1),V=Object(p.a)(M,2),Y=V[0],q=V[1],z=Object(n.useContext)(f);return Object(n.useEffect)((function(){l(z.name),_(z.about),E(!0),y(!0),x(""),A(""),q(!1)}),[z,t]),Object(n.useEffect)((function(){q(!(O&&k))}),[O,k]),r.a.createElement(g,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",isOpen:t,onClose:a,submitDescription:U?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),q(!0),c({name:u,about:b}).finally((function(){R(!1),q(!1)}))},isSubmitDisabled:Y},r.a.createElement("input",{value:u,type:"text",className:"popup__edit-field",id:"author-name",placeholder:"\u0410\u0432\u0442\u043e\u0440",name:"name",onChange:function(e){l(e.target.value),o(e.target,E,x)},minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{id:"author-name-error",className:"popup__input-error ".concat(O?"":"popup__input-error_visible")},w),r.a.createElement("input",{value:b,type:"text",className:"popup__edit-field",id:"author-specialization",placeholder:"\u041e \u0441\u0435\u0431\u0435",onChange:function(e){_(e.target.value),o(e.target,y,A)},name:"about",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{id:"author-specialization-error",className:"popup__input-error ".concat(k?"":"popup__input-error_visible")},P))},N=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,o=e.onCheckValidation,i=Object(n.useState)(""),s=Object(p.a)(i,2),u=s[0],l=s[1],d=Object(n.useState)(!0),m=Object(p.a)(d,2),b=m[0],_=m[1],h=Object(n.useState)(""),v=Object(p.a)(h,2),O=v[0],E=v[1],j=Object(n.useState)(!1),C=Object(p.a)(j,2),k=C[0],y=C[1],N=Object(n.useState)(!1),S=Object(p.a)(N,2),w=S[0],x=S[1],L=Object(n.useContext)(f);return Object(n.useEffect)((function(){l(""),_(!1),E(""),x(!0)}),[L,t]),Object(n.useEffect)((function(){x(!b)}),[b]),r.a.createElement(g,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:a,submitDescription:k?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),y(!0),x(!0),c(u).finally((function(){y(!1),x(!1)}))},isSubmitDisabled:w},r.a.createElement("input",{type:"url",value:u,className:"popup__edit-field",id:"avatar-link",name:"avatar",onChange:function(e){l(e.target.value),o(e.target,_,E)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{id:"avatar-link-error",className:"popup__input-error ".concat(b?"":"popup__input-error_visible")},O))},S=function(e){var t=e.isOpen,a=e.onClose,c=e.onSaveCard,o=e.onCheckValidation,i=e.card,s=Object(n.useState)(""),u=Object(p.a)(s,2),l=u[0],d=u[1],f=Object(n.useState)(""),m=Object(p.a)(f,2),b=m[0],_=m[1],h=Object(n.useState)(!1),v=Object(p.a)(h,2),O=v[0],E=v[1],j=Object(n.useState)(!1),C=Object(p.a)(j,2),k=C[0],y=C[1],N=Object(n.useState)(""),S=Object(p.a)(N,2),w=S[0],x=S[1],L=Object(n.useState)(""),D=Object(p.a)(L,2),P=D[0],A=D[1],H=Object(n.useState)(!1),T=Object(p.a)(H,2),U=T[0],R=T[1],M=Object(n.useState)(!0),V=Object(p.a)(M,2),Y=V[0],q=V[1];return Object(n.useEffect)((function(){i?(d(i.name),_(i.link),E(!0),y(!0),q(!1)):(d(""),_(""),E(!1),y(!1),q(!0)),x(""),A("")}),[t,i]),Object(n.useEffect)((function(){q(!(O&&k))}),[O,k]),r.a.createElement(g,{title:i?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430":"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:t,onClose:a,submitDescription:U?i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),q(!0),c(i,{name:l,link:b}).finally((function(){R(!1),q(!1)}))},isSubmitDisabled:Y},r.a.createElement("input",{value:l,type:"text",className:"popup__edit-field",id:"place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",minLength:"2",maxLength:"30",required:!0,onChange:function(e){d(e.target.value),o(e.target,E,x)}}),r.a.createElement("span",{id:"place-name-error",className:"popup__input-error ".concat(O?"":"popup__input-error_visible")},w),r.a.createElement("input",{value:b,type:"url",className:"popup__edit-field",id:"place-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",required:!0,onChange:function(e){_(e.target.value),o(e.target,y,A)}}),r.a.createElement("span",{id:"place-link-error",className:"popup__input-error ".concat(k?"":"popup__input-error_visible")},P))},w=function(e){var t=e.isOpen,a=e.onClose,c=e.onDeleteCard,o=(e.onSetSubmitDisabled,e.card),i=Object(n.useState)(!1),s=Object(p.a)(i,2),u=s[0],l=s[1],d=Object(n.useState)(!1),f=Object(p.a)(d,2),m=f[0],b=f[1];return r.a.createElement(g,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm-delete",isOpen:t,onClose:a,submitDescription:u?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430",onSubmit:function(e){e.preventDefault(),l(!0),b(!0),c(o).finally((function(){l(!1),b(!1)}))},isSubmitDisabled:m})},x=function(e){var t=e.isOpen,a=e.card,n=e.popupOutputArea;return r.a.createElement("div",{className:"popup popup_type_view-author ".concat(t?"popup_opened":""),style:t?n.clientY<184?{left:n.left,top:n.top+n.height}:{left:n.left,bottom:n.bottom}:{}},r.a.createElement("img",{className:"popup__card-author-avatar",src:t?a.owner.avatar:"",alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("p",{className:"popup__card-author-name"},t?a.owner.name:""),r.a.createElement("p",{className:"popup__card-author-about"},t?a.owner.about:""))},L=["\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"];var D=function(e){var t=e.user;return r.a.createElement("li",{className:"popup__like-user"},r.a.createElement("img",{className:"popup__like-user-avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("p",{className:"popup__like-user-name"},t.name))},P=function(e){var t,a=e.isOpen,c=e.card,o=e.popupOutputArea,i=e.needUpdateViewLike,s=Object(n.useState)(!1);return Object(n.useEffect)((function(){s[1](i)}),[i,s]),r.a.createElement("div",{className:"popup popup_type_view-likes ".concat(a?"popup_opened":""),style:function(){if(!a)return{};var e=45*c.likes.length;return o.clientY<e?{right:o.right,top:o.top+o.height}:{right:o.right,bottom:o.bottom}}()},r.a.createElement("h2",{className:"popup__header popup__header_size_small"},"\u041e\u0446\u0435\u043d\u0438\u043b\u0438:  ".concat(a?c.likes.length:0," ").concat(a?(t=c.likes.length)%10===1&&t%100!==11?L[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?L[1]:L[2]:"\u0447\u0435\u043b\u043e\u0432\u0435\u043a",":")),r.a.createElement("ul",{className:"popup__like-users"},a?c.likes.map((function(e){return r.a.createElement(D,{key:e._id,user:e})})):""))},A=a(10),H=a.n(A),T=function(e){var t=e.isOpen,a=e.errorMessage,c=e.onClose,o=Object(n.useCallback)((function(e){e.target.classList.contains("error-identification")||c()}),[c]),i=Object(n.useCallback)((function(e){"Escape"===e.key&&c()}),[c]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",i),document.addEventListener("mousedown",o),function(){document.removeEventListener("keydown",i),document.removeEventListener("mousedown",o)}}),[t,i,o]),r.a.createElement("div",{className:"popup popup_type_error ".concat(t?"popup_opened":"")},r.a.createElement("div",{className:"popup__error-container error-identification",onMouseDown:o},r.a.createElement("div",{className:"popup__error error-identification"},r.a.createElement("img",{className:"popup__error-icon error-identification",src:H.a,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043e\u0448\u0438\u0431\u043a\u0438"}),r.a.createElement("h2",{className:"popup__error-header error-identification"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:")),r.a.createElement("p",{className:"popup__error-caption error-identification"},"".concat(a.status," ").concat(a.message," url=").concat(a.url))))},U=a(11),R=a(12),M=new(function(){function e(t){Object(U.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(R.a)(e,[{key:"_processingResult",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,message:e.statusText,url:e.url})}},{key:"getUserProperties",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._processingResult(e)}))}},{key:"updateUserProperties",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._processingResult(e)}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._processingResult(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._processingResult(e)}))}},{key:"setLikeCard",value:function(e,t){var a=this,n=e?"DELETE":"PUT";return fetch("".concat(this._url,"/cards/likes/").concat(t),{method:n,headers:this._headers}).then((function(e){return a._processingResult(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"7da0d743-b2f7-439b-8a75-4db6d3ee0226","Content-Type":"application/json"}});var V=function(){var e=Object(n.useState)(!0),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(p.a)(o,2),m=s[0],h=s[1],v=Object(n.useState)(null),O=Object(p.a)(v,2),E=O[0],j=O[1],g=Object(n.useState)(!1),L=Object(p.a)(g,2),D=L[0],A=L[1],H=Object(n.useState)(!1),U=Object(p.a)(H,2),R=U[0],V=U[1],Y=Object(n.useState)(!1),q=Object(p.a)(Y,2),z=q[0],J=q[1],W=Object(n.useState)(!1),I=Object(p.a)(W,2),B=I[0],F=I[1],G=Object(n.useState)(!1),K=Object(p.a)(G,2),Q=K[0],X=K[1],Z=Object(n.useState)(null),$=Object(p.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(p.a)(ae,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(!1),ie=Object(p.a)(oe,2),se=ie[0],ue=ie[1],le=Object(n.useState)(!1),pe=Object(p.a)(le,2),de=pe[0],fe=pe[1],me=Object(n.useState)({left:0,top:0,right:0,bottom:0,width:0,height:0,clientY:0}),be=Object(p.a)(me,2),_e=be[0],he=be[1],ve=Object(n.useState)(!1),Oe=Object(p.a)(ve,2),Ee=Oe[0],je=Oe[1],Ce=Object(n.useState)({status:null,message:null,url:null}),ke=Object(p.a)(Ce,2),ge=ke[0],ye=ke[1];function Ne(e){ye(e),je(!0),console.log(e)}function Se(){return(Se=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateUserProperties(t);case 3:a=e.sent,j(a),Re(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ne(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function we(){return(we=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.updateUserAvatar(t);case 3:a=e.sent,j(a),Re(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ne(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function xe(e,t,a){t?e.likes=e.likes.filter((function(e){return e._id!==E._id})):e.likes.push(E),a(!0),fe(!0)}function Le(){return(Le=Object(l.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.likes.some((function(e){return e._id===E._id})),xe(t,n,a),e.prev=2,e.next=5,M.setLikeCard(n,t._id);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Ne(e.t0),xe(t,!n,a);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function De(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.addCard(t);case 2:a=e.sent,h([a].concat(Object(i.a)(m)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return He.apply(this,arguments)}function He(){return(He=Object(l.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.deleteCard(t._id);case 2:return e.next=4,M.addCard(a);case 4:n=e.sent,h((function(e){return e.map((function(e){return e._id===t._id?n:e}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=6;break}return e.next=4,De(a);case 4:e.next=8;break;case 6:return e.next=8,Ae(t,a);case 8:Re(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Ne(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Ue(){return(Ue=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.deleteCard(t._id);case 3:h((function(e){return e.filter((function(e){return e._id!==t._id}))})),Re(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Ne(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Re(){A(!1),V(!1),J(!1),F(!1),X(!1),ce(!1),ue(!1),fe(!1),te(null)}function Me(e,t,a){e.validity.valid?t(!0):(t(!1),a(e.validationMessage))}return Object(n.useEffect)((function(){M.getUserProperties().then((function(e){j(e)})).catch((function(e){Ne(e)})).finally((function(){c(!1)}))}),[]),Object(n.useEffect)((function(){M.getAllCards().then((function(e){h(e)})).catch((function(e){Ne(e)}))}),[]),a?r.a.createElement(k,null):r.a.createElement(f.Provider,{value:E},r.a.createElement("div",{className:"page__container"},r.a.createElement(d,null),r.a.createElement(b,{cards:m,card:ee,onEditAvatar:function(){A(!0)},onEditProfile:function(){V(!0)},onAddCard:function(){J(!0)},onClose:Re,onCardClick:function(e){te(e),X(!0)},onCardLike:function(e,t){return Le.apply(this,arguments)},onCardDelete:function(e){te(e),F(!0)},onEditCard:function(e){te(e),J(!0)},onHoverCardCaption:function(e,t){te(e),he(t),ce(!0)},onHoverLikeCard:function(e,t){te(e),he(t),ue(!0)},onOutHover:function(){Re()}}),r.a.createElement(N,{isOpen:D,onClose:Re,onUpdateAvatar:function(e){return we.apply(this,arguments)},onCheckValidation:Me}),r.a.createElement(y,{isOpen:R,onClose:Re,onUpdateUser:function(e){return Se.apply(this,arguments)},onCheckValidation:Me}),r.a.createElement(S,{isOpen:z,onClose:Re,onSaveCard:function(e,t){return Te.apply(this,arguments)},onCheckValidation:Me,card:ee}),r.a.createElement(w,{card:ee,isOpen:B,onClose:Re,onDeleteCard:function(e){return Ue.apply(this,arguments)}}),r.a.createElement(C,{currentCard:ee,setCurrentCard:te,cards:m,isOpen:Q,onClose:Re}),r.a.createElement(x,{card:ee,popupOutputArea:_e,isOpen:re}),r.a.createElement(P,{card:ee,popupOutputArea:_e,isOpen:se,needUpdateViewLike:de}),r.a.createElement(T,{isOpen:Ee,errorMessage:ge,onClose:function(){je(!1)}}),r.a.createElement(_,null)))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root"))},8:function(e,t,a){e.exports=a.p+"static/media/arrowLeft.247212d6.svg"},9:function(e,t,a){e.exports=a.p+"static/media/arrowRight.6f3961a7.svg"}},[[14,1,2]]]);
//# sourceMappingURL=main.8db203d6.chunk.js.map