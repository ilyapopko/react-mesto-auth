(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/arrowLeft.247212d6.svg"},24:function(e,t,a){e.exports=a.p+"static/media/arrowRight.6f3961a7.svg"},25:function(e,t,a){e.exports=a.p+"static/media/errorIcon.597bd0a7.svg"},28:function(e,t,a){e.exports=a(43)},33:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=a(8),s=(a(33),a(26)),u=a(4),l=a.n(u),p=a(9),m=a(1),d=a(2),f=function(e){var t=e.email,a=e.onLogout;return r.a.createElement("div",{className:"header__info"},r.a.createElement("p",{className:"header__email"},t),r.a.createElement(i.b,{className:"header__link",onClick:a,to:"/sign-in"},"\u0412\u044b\u0439\u0442\u0438"))},b=function(e){var t=e.isLoggedIn,a=e.userEmail,n=e.onLogout,c=e.isUserInfoOpened,o=e.setIsUserInfoOpened;return r.a.createElement("header",{className:"header"},t&c?r.a.createElement(f,{email:a,onLogout:n}):"",r.a.createElement("div",{className:"header__container"},r.a.createElement("a",{href:"#",className:"header__logo","aria-label":"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",target:"_blank"}),t?r.a.createElement("nav",{className:"header__menu"},r.a.createElement("p",{className:"header__email header__email_hidden"},a),r.a.createElement("button",{type:"button",className:"header__link header__link_hidden",onClick:n},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement("button",{type:"button",className:"header__menu-button ".concat(c?"header__menu-button_opened":""),onClick:function(e){o(!c)}})):r.a.createElement("nav",{className:"header__menu"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/sign-up"},r.a.createElement(i.b,{className:"header__link",to:"/sign-in"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement(d.b,{path:"/sign-in"},r.a.createElement(i.b,{className:"header__link",to:"/sign-up"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))))},_=r.a.createContext(),h=function(e){var t=e.card,a=e.onCardClick,c=e.onCardLike,o=e.onCardDelete,i=e.onEditCard,s=e.onHoverCardCaption,u=e.onHoverLikeCard,l=e.onOutHover,p=Object(n.useContext)(_),m=Object(n.useRef)(),d=Object(n.useRef)(),f=Object(n.useRef)(),b=t.owner._id===p._id,h=t.likes.some((function(e){return e._id===p._id})),O=Object(n.useState)(!1),v=function(){l()};return r.a.createElement("article",{className:"card"},r.a.createElement("img",{src:t.link,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"card__image",ref:m,onClick:function(){a(t)},onLoad:function(){m.current.naturalWidth<150&&(m.current.style.objectFit="none")}}),r.a.createElement("div",{className:"card__button-container"},r.a.createElement("button",{className:"card__delete-button ".concat(b?"card__delete-button_visible":""),type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}}),r.a.createElement("button",{className:"card__edit-button ".concat(b?"card__edit-button_visible":""),type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){i(t)}})),r.a.createElement("div",{className:"card__description"},r.a.createElement("h2",{className:"card__caption",ref:d,onMouseEnter:function(e){var a=d.current;s(t,{left:a.offsetParent.offsetLeft+a.offsetLeft,top:a.offsetParent.offsetTop+a.offsetTop,right:document.documentElement.clientWidth-a.offsetParent.offsetLeft-a.offsetLeft,bottom:document.documentElement.clientHeight-a.offsetParent.offsetTop-a.offsetTop,width:a.offsetWidth,height:a.offsetHeight,clientY:e.clientY})},onMouseOut:v},t.name),r.a.createElement("div",{className:"card__like-container"},r.a.createElement("button",{className:"card__like-button ".concat(h?"card__like-button_active":""),type:"button","aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",onClick:function(){O[1](!1),c(t,O[1])},ref:f,onMouseEnter:function(e){var a=f.current;u(t,{left:a.offsetParent.offsetLeft+a.offsetLeft,top:a.offsetParent.offsetTop+a.offsetTop,right:document.documentElement.clientWidth-a.offsetParent.offsetLeft-a.offsetLeft,bottom:document.documentElement.clientHeight-a.offsetParent.offsetTop-a.offsetTop,width:a.offsetWidth,height:a.offsetHeight,clientY:e.clientY})},onMouseOut:v}),r.a.createElement("p",{className:"card__like-count"},t.likes.length))))},O=function(e){var t=e.onEditAvatar,a=e.onEditProfile,c=e.onAddCard,o=e.cards,i=e.onCardClick,s=e.onCardLike,u=e.onCardDelete,l=e.onEditCard,p=e.onHoverCardCaption,m=e.onHoverLikeCard,d=e.onOutHover,f=Object(n.useContext)(_);return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{className:"profile__avatar",src:f.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("button",{className:"profile__edit-avatar-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443",onClick:t})),r.a.createElement("h1",{className:"profile__name"},f.name),r.a.createElement("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:a}),r.a.createElement("p",{className:"profile__specialization"},f.about),r.a.createElement("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",onClick:c})),r.a.createElement("section",{className:"cards"},o.map((function(e){return r.a.createElement(h,{key:e._id,card:e,onCardClick:i,onCardLike:s,onCardDelete:u,onEditCard:l,onHoverCardCaption:p,onHoverLikeCard:m,onOutHover:d})}))))},v=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2021 \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"))},E=function(e){var t=e.isOpen,a=e.onClose,c=e.name,o=e.children;var i=Object(n.useCallback)((function(e){"Escape"===e.key&&a()}),[a]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[t,i]),r.a.createElement("div",{className:"popup popup_type_".concat(c," ").concat(t?"popup_opened":""),onMouseDown:function(e){e.target===e.currentTarget&&a()}},o)},j=a(23),g=a.n(j),k=a(24),C=a.n(k),N=function(e){var t=e.isOpen,a=e.onClose,c=e.currentCard,o=e.setCurrentCard,i=e.cards,s=Object(n.useCallback)((function(){var e=i.indexOf(c);o(e-1<0?i[i.length-1]:i[e-1])}),[i,c,o]),u=Object(n.useCallback)((function(){var e=i.indexOf(c);e+1>i.length-1?o(i[0]):o(i[e+1])}),[i,c,o]),l=Object(n.useCallback)((function(e){"ArrowRight"===e.key?u():"ArrowLeft"===e.key&&s()}),[u,s]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",l),function(){document.removeEventListener("keydown",l)}}),[t,l]),r.a.createElement(E,{isOpen:t,name:"view-card",onClose:a},r.a.createElement("button",{className:"popup__previous-button",type:"button","aria-label":"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:s},r.a.createElement("img",{src:g.a,alt:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__previous-image"})),r.a.createElement("div",{className:"popup__photo-container"},r.a.createElement("img",{src:t?c.link:"",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t?c.name:""),className:"popup__image"}),r.a.createElement("p",{className:"popup__photo-caption"},t?c.name:""),r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})),r.a.createElement("button",{className:"popup__next-button",type:"button","aria-label":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:u},r.a.createElement("img",{src:C.a,alt:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__next-image"})))},S=function(){return r.a.createElement("div",{className:"popup__loader"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")},y=function(e){var t=e.isOpen,a=e.onClose,n=e.onSubmit,c=e.name,o=e.title,i=e.submitDescription,s=e.children,u=e.isSubmitDisabled;return r.a.createElement(E,{isOpen:t,name:c,onClose:a},r.a.createElement("form",{action:"#",className:"popup__container",name:"form_".concat(c),onSubmit:n,noValidate:!0},r.a.createElement("h2",{className:"popup__header"},o),r.a.createElement("fieldset",{className:"popup__container-info"},s,r.a.createElement("button",{className:"popup__save-button ".concat(u?"popup__save-button_disabled":""),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",disabled:u},i)),r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})))},w=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,o=e.onCheckValidation,i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],l=s[1],p=Object(n.useState)(""),d=Object(m.a)(p,2),f=d[0],b=d[1],h=Object(n.useState)(!0),O=Object(m.a)(h,2),v=O[0],E=O[1],j=Object(n.useState)(!0),g=Object(m.a)(j,2),k=g[0],C=g[1],N=Object(n.useState)(""),S=Object(m.a)(N,2),w=S[0],L=S[1],x=Object(n.useState)(""),D=Object(m.a)(x,2),T=D[0],P=D[1],A=Object(n.useState)(!1),U=Object(m.a)(A,2),H=U[0],R=U[1],I=Object(n.useState)(!1),V=Object(m.a)(I,2),M=V[0],z=V[1],q=Object(n.useContext)(_);return Object(n.useEffect)((function(){l(q.name),b(q.about),E(!0),C(!0),L(""),P(""),z(!1)}),[q,t]),Object(n.useEffect)((function(){z(!(v&&k))}),[v,k]),r.a.createElement(y,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",isOpen:t,onClose:a,submitDescription:H?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),z(!0),c({name:u,about:f}).finally((function(){R(!1),z(!1)}))},isSubmitDisabled:M},r.a.createElement("input",{value:u,type:"text",className:"popup__edit-field",id:"author-name",placeholder:"\u0410\u0432\u0442\u043e\u0440",name:"name",onChange:function(e){l(e.target.value),o(e.target,E,L)},minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{id:"author-name-error",className:"popup__input-error ".concat(v?"":"popup__input-error_visible")},w),r.a.createElement("input",{value:f,type:"text",className:"popup__edit-field",id:"author-specialization",placeholder:"\u041e \u0441\u0435\u0431\u0435",onChange:function(e){b(e.target.value),o(e.target,C,P)},name:"about",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{id:"author-specialization-error",className:"popup__input-error ".concat(k?"":"popup__input-error_visible")},T))},L=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,o=e.onCheckValidation,i=Object(n.useState)(""),s=Object(m.a)(i,2),u=s[0],l=s[1],p=Object(n.useState)(!0),d=Object(m.a)(p,2),f=d[0],b=d[1],h=Object(n.useState)(""),O=Object(m.a)(h,2),v=O[0],E=O[1],j=Object(n.useState)(!1),g=Object(m.a)(j,2),k=g[0],C=g[1],N=Object(n.useState)(!1),S=Object(m.a)(N,2),w=S[0],L=S[1],x=Object(n.useContext)(_);return Object(n.useEffect)((function(){l(x.avatar),b(!0),E(""),L(!1)}),[x,t]),Object(n.useEffect)((function(){L(!f)}),[f]),r.a.createElement(y,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:a,submitDescription:k?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),C(!0),L(!0),c(u).finally((function(){C(!1),L(!1)}))},isSubmitDisabled:w},r.a.createElement("input",{type:"url",value:u,className:"popup__edit-field",id:"avatar-link",name:"avatar",onChange:function(e){l(e.target.value),o(e.target,b,E)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{id:"avatar-link-error",className:"popup__input-error ".concat(f?"":"popup__input-error_visible")},v))},x=function(e){var t=e.isOpen,a=e.onClose,c=e.onSaveCard,o=e.onCheckValidation,i=e.card,s=Object(n.useState)(""),u=Object(m.a)(s,2),l=u[0],p=u[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),b=f[0],_=f[1],h=Object(n.useState)(!1),O=Object(m.a)(h,2),v=O[0],E=O[1],j=Object(n.useState)(!1),g=Object(m.a)(j,2),k=g[0],C=g[1],N=Object(n.useState)(""),S=Object(m.a)(N,2),w=S[0],L=S[1],x=Object(n.useState)(""),D=Object(m.a)(x,2),T=D[0],P=D[1],A=Object(n.useState)(!1),U=Object(m.a)(A,2),H=U[0],R=U[1],I=Object(n.useState)(!0),V=Object(m.a)(I,2),M=V[0],z=V[1];return Object(n.useEffect)((function(){i?(p(i.name),_(i.link),E(!0),C(!0),z(!1)):(p(""),_(""),E(!1),C(!1),z(!0)),L(""),P("")}),[t,i]),Object(n.useEffect)((function(){z(!(v&&k))}),[v,k]),r.a.createElement(y,{title:i?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430":"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:t,onClose:a,submitDescription:H?i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),z(!0),c(i,{name:l,link:b}).finally((function(){R(!1),z(!1)}))},isSubmitDisabled:M},r.a.createElement("input",{value:l,type:"text",className:"popup__edit-field",id:"place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",minLength:"2",maxLength:"30",required:!0,onChange:function(e){p(e.target.value),o(e.target,E,L)}}),r.a.createElement("span",{id:"place-name-error",className:"popup__input-error ".concat(v?"":"popup__input-error_visible")},w),r.a.createElement("input",{value:b,type:"url",className:"popup__edit-field",id:"place-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",required:!0,onChange:function(e){_(e.target.value),o(e.target,C,P)}}),r.a.createElement("span",{id:"place-link-error",className:"popup__input-error ".concat(k?"":"popup__input-error_visible")},T))},D=function(e){var t=e.isOpen,a=e.onClose,c=e.onDeleteCard,o=(e.onSetSubmitDisabled,e.card),i=Object(n.useState)(!1),s=Object(m.a)(i,2),u=s[0],l=s[1],p=Object(n.useState)(!1),d=Object(m.a)(p,2),f=d[0],b=d[1];return r.a.createElement(y,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm-delete",isOpen:t,onClose:a,submitDescription:u?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430",onSubmit:function(e){e.preventDefault(),l(!0),b(!0),c(o).finally((function(){l(!1),b(!1)}))},isSubmitDisabled:f})},T=function(e){var t=e.isOpen,a=e.card,n=e.popupOutputArea;return r.a.createElement("div",{className:"popup popup_type_view-author ".concat(t?"popup_opened":""),style:t?n.clientY<184?{left:n.left,top:n.top+n.height}:{left:n.left,bottom:n.bottom}:{}},r.a.createElement("img",{className:"popup__card-author-avatar",src:t?a.owner.avatar:"",alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("p",{className:"popup__card-author-name"},t?a.owner.name:""),r.a.createElement("p",{className:"popup__card-author-about"},t?a.owner.about:""))},P=["\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"];var A=function(e){var t=e.user;return r.a.createElement("li",{className:"popup__like-user"},r.a.createElement("img",{className:"popup__like-user-avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),r.a.createElement("p",{className:"popup__like-user-name"},t.name))},U=function(e){var t,a=e.isOpen,c=e.card,o=e.popupOutputArea,i=e.needUpdateViewLike,s=Object(n.useState)(!1);return Object(n.useEffect)((function(){s[1](i)}),[i,s]),r.a.createElement("div",{className:"popup popup_type_view-likes ".concat(a?"popup_opened":""),style:function(){if(!a)return{};var e=45*c.likes.length;return o.clientY<e?{right:o.right,top:o.top+o.height}:{right:o.right,bottom:o.bottom}}()},r.a.createElement("h2",{className:"popup__header popup__header_size_small"},"\u041e\u0446\u0435\u043d\u0438\u043b\u0438:  ".concat(a?c.likes.length:0," ").concat(a?(t=c.likes.length)%10===1&&t%100!==11?P[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?P[1]:P[2]:"\u0447\u0435\u043b\u043e\u0432\u0435\u043a",":")),r.a.createElement("ul",{className:"popup__like-users"},a?c.likes.map((function(e){return r.a.createElement(A,{key:e._id,user:e})})):""))},H=a(25),R=a.n(H),I=function(e){var t=e.isOpen,a=e.errorMessage,c=e.onClose,o=Object(n.useCallback)((function(e){e.target.classList.contains("error-identification")||c()}),[c]),i=Object(n.useCallback)((function(e){"Escape"===e.key&&c()}),[c]);return Object(n.useEffect)((function(){if(t)return document.addEventListener("keydown",i),document.addEventListener("mousedown",o),function(){document.removeEventListener("keydown",i),document.removeEventListener("mousedown",o)}}),[t,i,o]),r.a.createElement("div",{className:"popup popup_type_error ".concat(t?"popup_opened":"")},r.a.createElement("div",{className:"popup__error-container error-identification",onMouseDown:o},r.a.createElement("div",{className:"popup__error error-identification"},r.a.createElement("img",{className:"popup__error-icon error-identification",src:R.a,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043e\u0448\u0438\u0431\u043a\u0438"}),r.a.createElement("h2",{className:"popup__error-header error-identification"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:")),r.a.createElement("p",{className:"popup__error-caption error-identification"},"".concat(a.status," ").concat(a.message," url=").concat(a.url))))};var V=function(e){var t=e.isOpen,a=e.onClose,n=e.message;return r.a.createElement(E,{name:"tooltip",isOpen:t,onClose:a},r.a.createElement("div",{className:"popup__container"},r.a.createElement("div",{className:"popup__tooltip-status popup__tooltip-status_type_".concat(n.fail?"fail":"ok")}),r.a.createElement("h2",{className:"popup__tooltip-message"},n.message),r.a.createElement("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a})))};var M=function(e){var t=e.description,a=e.submitDescription,c=(e.onChange,e.onSubmit),o=(e.user,e.children),i=e.onCheckValidation,s=Object(n.useState)(""),u=Object(m.a)(s,2),l=u[0],p=u[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),b=f[0],_=f[1],h=Object(n.useState)(!0),O=Object(m.a)(h,2),v=O[0],E=O[1],j=Object(n.useState)(""),g=Object(m.a)(j,2),k=g[0],C=g[1],N=Object(n.useState)(!0),S=Object(m.a)(N,2),y=S[0],w=S[1],L=Object(n.useState)(""),x=Object(m.a)(L,2),D=x[0],T=x[1],P=Object(n.useState)(!1),A=Object(m.a)(P,2),U=A[0],H=A[1];return Object(n.useEffect)((function(){H(!(v&&y))}),[v,y]),Object(n.useEffect)((function(){E(!1),w(!1),H(!0)}),[]),r.a.createElement("section",{className:"auth"},r.a.createElement("h2",{className:"auth-form__header"},t),r.a.createElement("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),c({email:l,password:b})},noValidate:!0},r.a.createElement("label",{className:"auth-form__input-label",htmlFor:"email"},r.a.createElement("input",{type:"email",name:"email",className:"auth-form__input",placeholder:"Email",onChange:function(e){p(e.target.value),i(e.target,E,C)},value:l,required:!0}),r.a.createElement("span",{id:"auth-form__input-error",className:"auth-form__input-error ".concat(v?"":"auth-form__input-error_visible")},k)),r.a.createElement("label",{className:"auth-form__input-label",htmlFor:"password"},r.a.createElement("input",{type:"password",name:"password",className:"auth-form__input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){_(e.target.value),i(e.target,w,T)},value:b,required:!0}),r.a.createElement("span",{id:"auth-form__input-error",className:"auth-form__input-error ".concat(y?"":"auth-form__input-error_visible")},D)),r.a.createElement("button",{className:"auth-form__save-button ".concat(U?"auth-form__save-button_disabled":""),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",disabled:U},a)),o)};var z=function(e){return r.a.createElement(M,Object.assign({description:"\u0412\u0445\u043e\u0434",submitDescription:"\u0412\u043e\u0439\u0442\u0438"},e))};var q=function(e){return r.a.createElement(M,Object.assign({description:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitDescription:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},e),r.a.createElement("p",{className:"auth__caption"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",r.a.createElement(i.b,{to:"/sign-in",className:"auth__link"},"\u0412\u043e\u0439\u0442\u0438")))},J=a(27),Y=["isLoggedIn","component"],W=function(e){var t=e.isLoggedIn,a=e.component,n=Object(J.a)(e,Y);return r.a.createElement(d.b,null,(function(){return t?r.a.createElement(a,n):r.a.createElement(d.a,{to:"/sign-in"})}))},F=a(14),B=a(15),G=new(function(){function e(t){Object(F.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(B.a)(e,[{key:"_processingResult",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,message:e.statusText,url:e.url})}},{key:"getUserProperties",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._processingResult(e)}))}},{key:"updateUserProperties",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._processingResult(e)}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._processingResult(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._processingResult(e)}))}},{key:"setLikeCard",value:function(e,t){var a=this,n=e?"DELETE":"PUT";return fetch("".concat(this._url,"/cards/likes/").concat(t),{method:n,headers:this._headers}).then((function(e){return a._processingResult(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"7da0d743-b2f7-439b-8a75-4db6d3ee0226","Content-Type":"application/json"}}),K=a(18),Q=new(function(){function e(t){Object(F.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(B.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,message:e.statusText,url:e.url})}},{key:"register",value:function(e,t){return fetch("".concat(this._url,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._checkResponse)}},{key:"authorize",value:function(e,t){return fetch("".concat(this._url,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._checkResponse)}},{key:"checkToken",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:Object(K.a)(Object(K.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._checkResponse)}}]),e}())({url:"https://auth.nomoreparties.co",headers:{"Content-Type":"application/json"}});var X=function(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(m.a)(o,2),u=i[0],f=i[1],h=Object(n.useState)(null),E=Object(m.a)(h,2),j=E[0],g=E[1],k=Object(n.useState)(!1),C=Object(m.a)(k,2),y=C[0],P=C[1],A=Object(n.useState)(!1),H=Object(m.a)(A,2),R=H[0],M=H[1],J=Object(n.useState)(!1),Y=Object(m.a)(J,2),F=Y[0],B=Y[1],K=Object(n.useState)(!1),X=Object(m.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)(!1),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(null),ce=Object(m.a)(re,2),oe=ce[0],ie=ce[1],se=Object(n.useState)(!1),ue=Object(m.a)(se,2),le=ue[0],pe=ue[1],me=Object(n.useState)(!1),de=Object(m.a)(me,2),fe=de[0],be=de[1],_e=Object(n.useState)(!1),he=Object(m.a)(_e,2),Oe=he[0],ve=he[1],Ee=Object(n.useState)({left:0,top:0,right:0,bottom:0,width:0,height:0,clientY:0}),je=Object(m.a)(Ee,2),ge=je[0],ke=je[1],Ce=Object(n.useState)(!1),Ne=Object(m.a)(Ce,2),Se=Ne[0],ye=Ne[1],we=Object(n.useState)({status:null,message:null,url:null}),Le=Object(m.a)(we,2),xe=Le[0],De=Le[1],Te=Object(n.useState)(!1),Pe=Object(m.a)(Te,2),Ae=Pe[0],Ue=Pe[1],He=Object(n.useState)(""),Re=Object(m.a)(He,2),Ie=Re[0],Ve=Re[1],Me=Object(n.useState)(!1),ze=Object(m.a)(Me,2),qe=ze[0],Je=ze[1],Ye=Object(n.useState)(!1),We=Object(m.a)(Ye,2),Fe=We[0],Be=We[1],Ge=Object(n.useState)({message:"",fail:!1}),Ke=Object(m.a)(Ge,2),Qe=Ke[0],Xe=Ke[1],Ze=Object(d.g)(),$e=function(e){De(e),ye(!0)};Object(n.useEffect)((function(){G.getUserProperties().then((function(e){g(e)})).catch((function(e){$e(e)})).finally((function(){c(!1)}))}),[]),Object(n.useEffect)((function(){G.getAllCards().then((function(e){f(e)})).catch((function(e){$e(e)}))}),[]),Object(n.useEffect)((function(){mt()}),[]),Object(n.useEffect)((function(){!0===Ae&&Ze.push("/")}),[Ae]);var et=function(){var e=Object(p.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.updateUserProperties(t);case 3:a=e.sent,g(a),st(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),$e(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(p.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.updateUserAvatar(t);case 3:a=e.sent,g(a),st(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),$e(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),at=function(e,t,a){t?e.likes=e.likes.filter((function(e){return e._id!==j._id})):e.likes.push(j),a(!0),ve(!0)},nt=function(){var e=Object(p.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.likes.some((function(e){return e._id===j._id})),at(t,n,a),e.prev=2,e.next=5,G.setLikeCard(n,t._id);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),$e(e.t0),at(t,!n,a);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),rt=function(){var e=Object(p.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.addCard(t);case 2:a=e.sent,f([a].concat(Object(s.a)(u)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(p.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.deleteCard(t._id);case 2:return e.next=4,G.addCard(a);case 4:n=e.sent,f((function(e){return e.map((function(e){return e._id===t._id?n:e}))}));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ot=function(){var e=Object(p.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=6;break}return e.next=4,rt(a);case 4:e.next=8;break;case 6:return e.next=8,ct(t,a);case 8:st(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),$e(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),it=function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.deleteCard(t._id);case 3:f((function(e){return e.filter((function(e){return e._id!==t._id}))})),st(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),$e(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){P(!1),M(!1),B(!1),$(!1),ne(!1),pe(!1),be(!1),ve(!1),ie(null),Be(!1),Xe({message:"",fail:!1})},ut=function(e,t,a){e.validity.valid?t(!0):(t(!1),a(e.validationMessage))},lt=function(e){console.log(e),Xe({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.\n "+e.message,fail:!0}),Be(!0)},pt=function(e){e.token?(localStorage.setItem("token",e.token),Q.checkToken(e.token).then((function(e){Ve(e.data.email),Ue(!0),Xe({message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",fail:!1}),Be(!0)}))):(Xe({message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",fail:!1}),Be(!0),Ze.push("/sign-in"))},mt=function(){var e=localStorage.getItem("token");e&&Q.checkToken(e).then((function(e){Ve(e.data.email),Ue(!0)})).catch(lt)};return a?r.a.createElement(S,null):r.a.createElement(_.Provider,{value:j},r.a.createElement("div",{className:"page__container"},r.a.createElement(L,{isOpen:y,onClose:st,onUpdateAvatar:tt,onCheckValidation:ut}),r.a.createElement(w,{isOpen:R,onClose:st,onUpdateUser:et,onCheckValidation:ut}),r.a.createElement(x,{isOpen:F,onClose:st,onSaveCard:ot,onCheckValidation:ut,card:oe}),r.a.createElement(D,{card:oe,isOpen:Z,onClose:st,onDeleteCard:it}),r.a.createElement(N,{currentCard:oe,setCurrentCard:ie,cards:u,isOpen:ae,onClose:st}),r.a.createElement(T,{card:oe,popupOutputArea:ge,isOpen:le}),r.a.createElement(U,{card:oe,popupOutputArea:ge,isOpen:fe,needUpdateViewLike:Oe}),r.a.createElement(I,{isOpen:Se,errorMessage:xe,onClose:function(){ye(!1)}}),r.a.createElement(V,{isOpen:Fe,onClose:st,message:Qe}),r.a.createElement(b,{isLoggedIn:Ae,userEmail:Ie,isUserInfoOpened:qe,setIsUserInfoOpened:Je,onLogout:function(){localStorage.removeItem("token"),Ve(""),Je(!1),Ue(!1),Ze.push("/sign-in")}}),r.a.createElement(d.d,null,r.a.createElement(W,{exact:!0,path:"/",isLoggedIn:Ae,cards:u,card:oe,component:O,onEditAvatar:function(){P(!0)},onEditProfile:function(){M(!0)},onAddCard:function(){B(!0)},onCardClick:function(e){ie(e),ne(!0)},onCardLike:nt,onCardDelete:function(e){ie(e),$(!0)},onEditCard:function(e){ie(e),B(!0)},onHoverCardCaption:function(e,t){ie(e),ke(t),pe(!0)},onHoverLikeCard:function(e,t){ie(e),ke(t),be(!0)},onOutHover:function(){st()}}),r.a.createElement(d.b,{path:"/sign-in"},Ae?r.a.createElement(d.a,{to:"/"}):r.a.createElement(z,{onSubmit:function(e){var t=e.email,a=e.password;Q.authorize(t,a).then(pt).catch(lt)},onCheckValidation:ut})),r.a.createElement(d.b,{path:"/sign-up"},Ae?r.a.createElement(d.a,{to:"/"}):r.a.createElement(q,{onSubmit:function(e){var t=e.email,a=e.password;console.log({email:t,password:a}),Q.register(t,a).then(pt).catch(lt)},onCheckValidation:ut})),r.a.createElement(d.b,{path:"*"},r.a.createElement(d.a,{to:"/"}))),Ae&&r.a.createElement(v,null)))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(X,null))),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.5e336bdc.chunk.js.map